#!/bin/bash
# quick_enum.sh - Enhanced local recon for Linux systems
#
# Usage:
#   ./quick_enum.sh
#   ./quick_enum.sh -h
#

usage() {
  echo "Usage: $0"
  echo "No arguments required."
  echo "Outputs system enumeration to a timestamped file."
  exit 0
}

if [[ "$1" == "-h" || "$1" == "--help" ]]; then
  usage
fi

OUT="enum_report_$(hostname)_$(date +%Y%m%d_%H%M%S).txt"

{
  echo "========== USER INFO =========="
  whoami
  id
  groups

  echo -e "\\n========== SYSTEM =========="
  hostnamectl
  uname -a
  uptime

  echo -e "\\n========== NETWORK =========="
  ip a
  echo -e "\\n--- Listening Ports ---"
  ss -tulwn

  echo -e "\\n========== USERS & SHELLS =========="
  cat /etc/passwd | cut -d: -f1,7
  echo -e "\\n--- Recent Logins ---"
  last -a | head

  echo -e "\\n========== SUID BINARIES =========="
  find / -perm -4000 -type f 2>/dev/null

  echo -e "\\n========== ENV VARS =========="
  env
} | tee "$OUT"

echo "[+] Report saved to $OUT"
