#!/bin/bash
# email_harvester.sh - Harvest email addresses from a website using wget + grep
#
# Usage:
#   ./email_harvester.sh <url>
#   ./email_harvester.sh -h
#
# Example:
#   ./email_harvester.sh https://example.com

usage() {
  echo "Usage: $0 <website_url>"
  echo "Example: $0 https://target.com"
  exit 0
}

if [[ "$1" == "-h" || "$1" == "--help" || -z "$1" ]]; then
  usage
fi

URL="$1"
TMP="harvest_tmp"

mkdir -p "$TMP"
wget -q -r -l2 -P "$TMP" "$URL"

echo "[*] Searching for emails..."
grep -Eroh "[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,6}" "$TMP" | sort -u

rm -rf "$TMP"
